<div class="container">
  <div class="row justify-content-center">
    <div class="col-lg-6">
      <form [formGroup]="guideForm">
        <div class="mb-3">
          <label for="nom" class="form-label">Nom</label>
          <input type="text" class="form-control" formControlName="nom">
        </div>

        <div class="mb-3">
          <label for="dateCreation" class="form-label">Date de création</label>
          <input type="date" class="form-control" formControlName="dateCreation">
        </div>

        <div class="mb-3">
          <label for="description" class="form-label">Description</label>
          <textarea class="form-control" formControlName="description" rows="4"></textarea>
        </div>


        <h3>Activités :</h3>

        <div *ngFor="let a of guideForm.value.activites; let i = index">
          <div>
            <label for="activiteNom{{i}}">Nom : </label>
            <input type="text" name="activiteNom{{i}}" [value]="a.nom" class="form-control">

            <label for="activiteCommentaire{{i}}">Commentaire :</label>
            <textarea name="activiteCommentaire{{i}}" [(ngModel)]="a.commentaire" class="form-control" [ngModelOptions]="{ standalone: true }"></textarea>

            <label for="activitePhotos{{i}}">Photos : </label>
            <div *ngFor="let photo of a.photos; let j = index">
              <img [src]="photo" alt="Photo {{j+1}}" width="200" height="150">
              <button type="button" (click)="supprimerPhoto(i, j)">Supprimer la photo</button>
            </div>

            <label for="activiteDepense{{i}}">Prix : </label>
            <input type="text" name="activiteDepense{{i}}" [value]="a.depense" class="form-control">

            <button type="button" (click)="supprimerActivite(i)">Supprimer l'activité</button>
          </div>
        </div>

      </form>

      <form>
        <div *ngIf="showActiviteForm">
          <div class="formGroup">
            <label for="activiteNom">Nom : </label>
            <input type="text" name="activiteNom" [(ngModel)]="activite.nom" class="form-control" [ngModelOptions]="{ standalone: true }">

            <label for="activiteCommentaire">Commentaire :</label>
            <textarea name="activiteCommentaire" [(ngModel)]="activite.commentaire" class="form-control" [ngModelOptions]="{ standalone: true }"></textarea>

            <label for="activitePhotos">Photos : </label>
            <input type="file" name="activitePhotos" (change)="handlePhotoUpload($event)" multiple style="display: block;">

            <label for="activiteDepense">Prix : </label>
            <input type="text" name="activiteDepense" [(ngModel)]="activite.depense" class="form-control" [ngModelOptions]="{ standalone: true }">

            <button type="submit" (click)="ajouterActivite()">Ajouter</button>
            <button *ngIf="showActiviteForm" (click)="toggleActiviteForm()">Annuler</button>
          </div>
        </div>

        <button *ngIf="!showActiviteForm" (click)="toggleActiviteForm()" style="margin-top: 2%">Ajouter une
          activité</button>

        <div style="margin-top: 2%; margin-bottom: 2%; display: flex; justify-content: center;">
          <button type="submit" class="btn btn-primary" (click)="saveGuideVoyage()">Ajouter guide de voyage</button>
        </div>

      </form>

      
    </div>
  </div>
</div>
